{%- liquid
  assign componentLabels = component.customLabel | default: component.itemLabels
  assign startPage = site | get_page: component.featurettesID
  assign root = startPage | default: site.root_page
  assign items = root.descendants | filter_pages: by: "name", sort: "asc", tags: page.data.customLabel, tags_match: "all", hidden: page.data.showHidden, random: false, limit: page.data.limit
  assign sortedItems = items | sort: "name"
  assign i = 0
-%}
{
  "places": [
    {%- for item in items -%}{%- if item.data.thumbnail_url != blank -%}{%- assign thumbnailSrc = item.data.thumbnail_url | build_image_url: size: '960x640', format: 'webp' -%}{%- endif -%}{
        "title": "{{ item.alternate_name | default: item.name }}",
        "img": "<img class=\"w-100 mb-1\" src=\"{{ thumbnailSrc }}\">",
        "address": "<strong>Address</strong>",
        "description": "{{ item.data.description }}",
        "lat": "{{ item.data.lat | strip }}",
        "lng": "{{ item.data.long | strip }}"
    }{%- assign i = i | plus: 1 -%}{%- if i < items.length -%},{%- endif -%}{%- endfor -%}
  ]
}
